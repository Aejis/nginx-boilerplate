{{> redirection_template }}
{{> upstream_template }}
server {
  listen 443 ssl spdy deferred; # deferred for Linux, accept_filter=httpready for FreeBSD
  server_name {{hostname}};

  root {{public_folder}};

  # Here is three variants: performant, secure and ie6
  include /etc/nginx/conf/server/ssl/performant.conf;

  # Paths to SSL certificates
  ssl_certificate         /etc/nginx/ssl/{{hostname}}.crt;
  ssl_certificate_key     /etc/nginx/ssl/{{hostname}}.key;
  ssl_trusted_certificate /etc/nginx/ssl/{{hostname}}.crt;

  add_header "Access-Control-Allow-Origin" "*.{{hostname}}"; # Edit it if you plan to use CORS from different hosts
  add_header Strict-Transport-Security "max-age=31536000; includeSubDomains"; # Remove this if 'secure' configuration used or you plan to use http connections too
  add_header "Cache-Control" "no-transform"; # Prevent mobile network providers from modifying your site
  add_header "X-UA-Compatible" "IE=Edge"; # Use ChromeFrame if it's installed

  # Use dedicated log for each host
  access_log /var/log/nginx/{{hostname}}.access.log;
  error_log  /var/log/nginx/{{hostname}}.error.log;
}
